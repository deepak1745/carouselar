/**
 * carouselar v0.1.0 (http://tamerayd.in/carouselar)
 * Copyright 2015 Tamer Aydin (http://tamerayd.in)
 * Licensed under MIT
 */
!function(n,e){"use strict";e.module("carouselar.constants",[]).constant("CarouselarConstants",{RESIZE_TIMEOUT:300,MAX_DISPLAYED_IMAGE:5,BREAKPOINTS:{LANDSCAPE:960,PORTRAIT:640}})}(window,window.angular),function(n,e){"use strict";e.module("carouselar.controllers",["carouselar.constants"]).controller("CarouselarController",["$scope","$timeout","$window","CarouselarConstants",function(n,e,a,i){n.visibleImages=[],n.maxImageCount=1,n.displayingImageCount=0,n.activeSection=0,n.sectionCount=5,n.containerPosition="translateX(0)",n.singleImageWidth="100%",n.createArray=function(n){return new Array(n||0)},n.prev=function(){n.moveToSection(n.activeSection-1)},n.next=function(){n.moveToSection(n.activeSection+1)},n.moveToSection=function(e){n.activeSection=e>=n.sectionCount?0:0>e?n.sectionCount-1:e;var a,i,o=100/n.displayingImageCount,t=[];if(n.activeSection===n.sectionCount-1)for(a=(n.images.length-n.displayingImageCount)*o,i=0;i<n.displayingImageCount+1;i++)t.push(n.images.length-i);else{var r=n.activeSection*n.displayingImageCount;for(t.push(r),i=1;i<n.displayingImageCount;i++)t.push(r+i);a=r*o}n.containerPosition="translateX(-"+a+"%)",n.visibleImages=t},n.resizeTimer=null,n.onResize=function(o,t){e.cancel(n.resizeTimer),n.resizeTimer=e(function(){var e=n.maxImageCount,o=t||a.innerWidth;o<i.BREAKPOINTS.LANDSCAPE&&(e=a.Math.ceil(n.maxImageCount/2),o<i.BREAKPOINTS.PORTRAIT&&(e=1)),n.displayingImageCount=e},i.RESIZE_TIMEOUT)},n.$watch("displayingImageCount",function(e){e&&(n.sectionCount=Math.ceil(n.images.length/n.displayingImageCount),n.moveToSection(n.activeSection),n.singleImageWidth=100/e+"%")}),n.isImageVisible=function(e){return n.visibleImages.indexOf(e)>-1}}]).controller("CarouselarImageController",["$scope",function(n){n.isLoading=!0,n.onLoad=function(){n.isLoading=!1,n.$apply()};var e=n.$watch("isVisible",function(a){a&&(n.compileImage(),e())})}])}(window,window.angular),function(n,e){"use strict";e.module("carouselar.directives",["carouselar.controllers","carouselar.constants"]).directive("carouselar",["$window","CarouselarConstants",function(n,a){return{replace:!0,restrict:"E",scope:{images:"="},controller:"CarouselarController",template:'<div class="carouselar"><div class="carouselar__container"><div class="carouselar__inner-container" ng-style="{\'transform\': containerPosition}"><div class="carouselar__image-container" ng-style="{\'width\': singleImageWidth}" ng-repeat="image in images" is-visible="isImageVisible($index)" img-url="{{image}}" carouselar-image></div></div></div><div class="carouselar__navigation"><span class="carouselar__navigation__button carouselar__navigation__button--prev" ng-click="prev()">PREV</span><div class="carouselar__navigation__index"><span class="carouselar__navigation__button carouselar__navigation__button--index" ng-repeat="i in createArray(sectionCount) track by $index" ng-class="{\'carouselar__navigation__button--active\':$index === activeSection}"ng-click="moveToSection($index)">{{$index + 1}}</span></div><span class="carouselar__navigation__button carouselar__navigation__button--next" ng-click="next()">NEXT</span></div></div>',link:function(i,o,t){i.maxImageCount=Math.min(parseInt(t.maxImageCount),a.MAX_DISPLAYED_IMAGE)||1;var r=e.element(n);r.bind("resize",i.onResize),i.onResize(),i.$on("destroy",function(){r.unbind(i.onResize)})}}}]).directive("carouselarImage",["$compile",function(n){return{restrict:"A",controller:"CarouselarImageController",scope:{isVisible:"=",imgUrl:"@"},template:'<div class="carouselar__loader" ng-if="isLoading"></div>',link:function(e,a){e.compileImage=function(){a.append('<img class="carouselar__image" carouselar-loader on-load="onLoad()" ng-src="{{imgUrl}}" />'),n(a.contents())(e)}}}}]).directive("carouselarLoader",[function(){return{restrict:"A",scope:{onLoad:"&"},link:function(n,e){e.bind("load",n.onLoad)}}}])}(window,window.angular),function(n,e){"use strict";e.module("carouselar",["carouselar.controllers","carouselar.directives","carouselar.constants"])}(window,window.angular);