/**
 * carouselar v0.1.0 (http://tamerayd.in/carouselar)
 * Copyright 2015 Tamer Aydin (http://tamerayd.in)
 * Licensed under MIT
 */
!function(n,e){"use strict";e.module("carouselar.constants",[]).constant("CarouselarConstants",{RESIZE_TIMEOUT:300,MAX_DISPLAYING_IMAGE:5,BREAKPOINTS:{LANDSCAPE:960,PORTRAIT:640}})}(window,window.angular),function(n,e){"use strict";e.module("carouselar.controllers",["carouselar.constants"]).controller("CarouselarController",["$scope","$timeout","$window","CarouselarConstants",function(n,e,i,a){n.visibleImages=[],n.maxImageCount=1,n.displayingImageCount=0,n.activeSection=0,n.sectionCount=5,n.containerPosition="translateX(0)",n.singleImageWidth="100%",n.createArray=function(n){return new Array(n||0)},n.prev=function(){n.moveToSection(n.activeSection-1)},n.next=function(){n.moveToSection(n.activeSection+1)},n.moveToSection=function(e){n.activeSection=e>=n.sectionCount?0:0>e?n.sectionCount-1:e;var i,a,o=100/n.displayingImageCount,t=[];if(n.activeSection===n.sectionCount-1)for(i=(n.images.length-n.displayingImageCount)*o,a=0;a<n.displayingImageCount+1;a++)t.push(n.images.length-a);else{var r=n.activeSection*n.displayingImageCount;for(t.push(r),a=1;a<n.displayingImageCount;a++)t.push(r+a);i=r*o}n.containerPosition="translateX(-"+i+"%)",n.visibleImages=t},n.resizeTimer=null,n.onResize=function(o,t){e.cancel(n.resizeTimer),n.resizeTimer=e(function(){var e=n.maxImageCount,o=t||i.innerWidth;o<a.BREAKPOINTS.LANDSCAPE&&(e=Math.ceil(n.maxImageCount/2),o<a.BREAKPOINTS.PORTRAIT&&(e=1)),n.displayingImageCount=e},a.RESIZE_TIMEOUT)},n.$watch("displayingImageCount",function(e){e&&(n.sectionCount=Math.ceil(n.images.length/n.displayingImageCount),n.moveToSection(n.activeSection),n.singleImageWidth=100/e+"%")}),n.isImageVisible=function(e){return n.visibleImages.indexOf(e)>-1}}]).controller("CarouselarImageController",["$scope",function(n){n.isLoading=!0,n.onLoad=function(){n.isLoading=!1,n.$apply()};var e=n.$watch("isVisible",function(i){i&&(n.compileImage(),e())})}])}(window,window.angular),function(n,e){"use strict";e.module("carouselar.directives",["carouselar.controllers","carouselar.constants"]).directive("carouselar",["$window","CarouselarConstants",function(n,i){return{replace:!0,restrict:"E",scope:{images:"="},controller:"CarouselarController",template:'<div class="carouselar"><div class="carouselar__container"><div class="carouselar__inner-container" ng-style="{\'transform\': containerPosition}"><div class="carouselar__image-container" ng-style="{\'width\': singleImageWidth}" ng-repeat="image in images" is-visible="isImageVisible($index)" img-url="{{image}}" carouselar-image></div></div></div><div class="carouselar__navigation"><span class="carouselar__navigation__button carouselar__navigation__button--prev" ng-click="prev()">PREV</span><div class="carouselar__navigation__index"><span class="carouselar__navigation__button carouselar__navigation__button--index" ng-repeat="i in createArray(sectionCount) track by $index" ng-class="{\'carouselar__navigation__button--active\':$index === activeSection}"ng-click="moveToSection($index)">{{$index + 1}}</span></div><span class="carouselar__navigation__button carouselar__navigation__button--next" ng-click="next()">NEXT</span></div></div>',link:function(a,o,t){a.maxImageCount=Math.min(parseInt(t.displayingImageCount),i.MAX_DISPLAYING_IMAGE)||1;var r=e.element(n);r.bind("resize",a.onResize),a.onResize(),a.$on("$destroy",function(){r.unbind("resize",a.onResize)})}}}]).directive("carouselarImage",["$compile",function(n){return{restrict:"A",controller:"CarouselarImageController",scope:{isVisible:"=",imgUrl:"@"},template:'<div class="carouselar__loader" ng-if="isLoading"></div>',link:function(e,i){e.compileImage=function(){i.append('<img class="carouselar__image" carouselar-loader on-load="onLoad()" ng-src="{{imgUrl}}" />'),n(i.contents())(e)}}}}]).directive("carouselarLoader",[function(){return{restrict:"A",scope:{onLoad:"&"},link:function(n,e){e.bind("load",n.onLoad)}}}])}(window,window.angular),function(n,e){"use strict";e.module("carouselar",["carouselar.controllers","carouselar.directives","carouselar.constants"])}(window,window.angular);